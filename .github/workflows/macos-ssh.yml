name: macOS SSH Session

on:
  workflow_dispatch:

jobs:
  macos-ssh:
    runs-on: macos-14
    timeout-minutes: 360

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Show system info
        run: |
          echo "=== macOS Version ==="
          sw_vers
          echo ""
          echo "=== Xcode Version ==="
          xcodebuild -version
          echo ""
          echo "=== Hardware ==="
          sysctl -n machdep.cpu.brand_string
          echo ""
          echo "=== Disk Space ==="
          df -h /
          echo ""
          echo "=== Memory ==="
          sysctl -n hw.memsize | awk '{print $1/1024/1024/1024 " GB"}'

      - name: Setup tmate SSH session
        uses: mxschmitt/action-tmate@v3
        with:
          limit-access-to-actor: true
        timeout-minutes: 350
